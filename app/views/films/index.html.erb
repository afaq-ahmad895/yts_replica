<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>title - The Official Home of YIFY Movies Torrent Download - YTS</title>
    
    <link rel="short icon" href="app/assets/images/image/short_icon.png">
    <link rel="stylesheet" href="app/assets/stylesheets/style.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>

<nav>
  <%= form_tag(root_path, method: :get) do %>
    <%= label_tag :movie_id, 'Enter Movie ID:' %>
    <%= text_field_tag :movie_id %>
    <%= submit_tag 'Search' %>
  <% end %>
</nav>

<hr>
<br>

<%= link_to "Add Movie To Database",  films_new_path   %>
<% if !flash[:notice].blank? %>
  <%= flash[:notice] %>
<% end %>
<br>
    <section>
<h1>Movies From Database</h1>
      <% if @films.empty? %>
        <p>No movies found in the database.</p>
      <% else %>
      <% @films.in_groups_of(5, false) do |row| %>
        <div class="movies_box">

          <% row.compact.each do |film| %>
            <div class="movies_card">

              <div class="movies_image">
                <div class="hover">
                  <i class="fa-solid fa-star"></i>
                  <p class="rate"><%= film.rating %></p>
                  <p class="categories"><%= film.genre %></p>
                  <%=link_to "View Details", film_path(film), :class => 'btn btn-primary'%>
                </div>

                <img src="<%= film.images.first.picture.url %>">
              </div>

              <div class="text">
                <p class="name"><%= film.title %></p>
                <p class="year"><%= film.year %></p>
              </div>
            </div>

          <% end %>

        </div>
      <% end %>
        <%end %>

<!--      <table>-->
<!--        <tr>-->
<!--          <th colspan="5"><h1>Movies From Database</h1></th>-->
<!--        </tr>-->
<!--        <tr>-->
          <%# if @films.empty? %>
<!--            <td colspan="5"><p>No movies found in the database.</p></td>-->
          <%# else %>
            <%# @films.in_groups_of(5, false) do |row| %>
<!--              <tr>-->
                <%# row.compact.each do |film| %>
<!--                  <td>-->
<!--                    <div class="movies_card">-->
<!--                      <div class="movies_image">-->
<!--                        <div class="hover">-->
<!--                          <i class="fa-solid fa-star"></i>-->
<!--                          <p class="rate"><%#= film.rating %></p>-->
<!--                          <p class="categories"><%#= film.genre %></p>-->
                          <%#=link_to "View Details", film_path(film), :class => 'btn btn-primary'%>
<!--                        </div>-->

<!--                        <img src="<%#= film.images.first.picture.url %>">-->
<!--                      </div>-->

<!--                      <div class="text">-->
<!--                        <p class="name"><%#= film.title %></p>-->
<!--                        <p class="year"><%#= film.year %></p>-->
<!--                      </div>-->
<!--                    </div>-->
<!--                  </td>-->
                <%# end %>
<!--              </tr>-->
            <%# end %>
          <%# end %>
<!--          </tr>-->
<!--          </table>-->

<!--      <hr>-->
    </section>
<hr>
    <br><br>

    <section>
      <h1>Data From Apis</h1>
      <% @movie_detail.in_groups_of(5, false) do |row| %>
        <div class="movies_box">

          <% row.compact.each do |movie| %>

            <div class="movies_card">

              <div class="movies_image">
                <div class="hover">
                  <i class="fa-solid fa-star"></i>
                  <p class="rate"><%= movie['vote_average'] %></p>
                  <p class="categories"><%= movie['genres'] %></p>
                </div>
                <%= image_tag movie['poster_path'] %>
              </div>
              <div class="text">
                <p class="name"><%= movie['title'] %></p>
                <p class="year"><%= movie['release_date'] %></p>
              </div>
            </div>

          <% end %>
        </div>

      <% end %>


    </section>

    <hr>

    <section>
      <h1>New movies From Apis, DB movies are not included</h1>
      <% @new_movies.in_groups_of(5, false) do |row| %>
        <div class="movies_box">

          <% row.compact.each do |movie| %>

            <div class="movies_card">

              <div class="movies_image">
                <div class="hover">
                  <i class="fa-solid fa-star"></i>
                  <p class="rate"><%= movie['vote_average'] %></p>
                  <p class="categories"><%= movie['genres'] %></p>
                  <%#= button_to 'Add to Database', add_movie_path(movie_id: movie['_id']), method: :post, :class => 'btn btn-primary' %>

                  <%= form_with(url: add_movie_path(movie_id: movie['_id']), method: :post) do |f| %>
                    <%= f.hidden_field :title, value: movie['title'] %>
                    <%= f.hidden_field :rating, value: movie['vote_average'] %>
                    <%= f.hidden_field :genre, value: movie['genres'] %>
                    <%= f.hidden_field :year, value: movie['release_date'] %>
                    <%= f.hidden_field :picture, value: movie['poster_path'] %>
                    <%= f.submit 'Add to Database', class: 'btn' %>
                  <% end %>

                </div>
                <%= image_tag movie['poster_path'] %>
              </div>
              <div class="text">
                <p class="name"><%= movie['title'] %></p>
                <p class="year"><%= movie['release_date'] %></p>
              </div>
            </div>

          <% end %>
        </div>

      <% end %>


    </section>



</body>

</html>


